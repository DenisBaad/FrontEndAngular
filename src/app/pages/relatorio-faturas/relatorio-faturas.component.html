<div class="margem">
  <mat-card class="mat-elevation-z4">

    <form [formGroup]="form">
      <dix fxLayout="row wrap" style="margin: 10px;">

        <mat-form-field class="form-field-status" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="20" fxFlex.xl="20">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option *ngFor="let item of faturaStatusOptions" [value]="item.value">
              {{item.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="form-field-status" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="80" fxFlex.xl="80">
          <mat-label>Cliente</mat-label>
          <mat-select formControlName="clientesSelecionados" multiple>
            <mat-option *ngFor="let cliente of clientesDatas" [value]="cliente.id">
              {{ cliente.nome }}  {{ cliente.cpfCnpj }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="35" fxFlex.lg="30" fxFlex.xl="30">
          <mat-label>Início Vigência</mat-label>
          <input matInput [matDatepicker]="pickerAbertura" formControlName="dataAbertura" placeholder="DD/MM/YYYY" (click)="pickerAbertura.open()">
          <mat-datepicker-toggle matSuffix [for]="pickerAbertura"></mat-datepicker-toggle>
          <mat-datepicker #pickerAbertura></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill" fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="35" fxFlex.lg="30" fxFlex.xl="30">
          <mat-label>Fim Vigência</mat-label>
          <input matInput [matDatepicker]="pickerFechamento" formControlName="dataFechamento" placeholder="DD/MM/YYYY" (click)="pickerFechamento.open()">
          <mat-datepicker-toggle matSuffix [for]="pickerFechamento"></mat-datepicker-toggle>
          <mat-datepicker #pickerFechamento></mat-datepicker>
        </mat-form-field>

        <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="100" fxFlex.lg="20" fxFlex.xl="20" style="align-self: center;">
          <button mat-raised-button color="primary" style="margin-bottom: 10px; margin-left: 10px;" (click)="carregarRelatorio()">
            <i class="fa-solid fa-file-pdf" style="margin-right: 8px;"></i>
            Gerar relatório</button>
        </div>
      </dix>
    </form>

    <div *ngIf="loading" style="padding-top: 30px;">
      <mat-progress-bar style="padding-top: 35px" mode="query"></mat-progress-bar>
    </div>

    <iframe *ngIf="!loading" [src]="pdfUrl | safe" width="100%" height="1000px"></iframe>
  </mat-card>
</div>

